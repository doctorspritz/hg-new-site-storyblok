---
import Container from '../atoms/Container.astro';
import Heading from '../atoms/Heading.astro';
import Paragraph from '../atoms/Paragraph.astro';
import Button from '../atoms/Button.astro';
import Image from '../atoms/Image.astro';

interface CTA {
  href: string;
  label: string;
}
interface Media {
  src: string;
  alt: string;
  position?: 'left' | 'right' | 'background';
}
interface Props {
  title: string;
  subtitle: string;
  cta?: CTA;
  media?: Media;
  variant?: 'light' | 'dark';
}
const { title, subtitle, cta, media, variant = 'light' } = Astro.props as Props;
const mediaPosition = media?.position ?? 'left';
---

<section
  class:list={[
    'hg-Hero',
    `variant-${variant}`,
    media ? `media-${mediaPosition}` : '',
  ]}
>
  {
    media?.position === 'background' && (
      <div class="background-image">
        <Image
          src={media.src}
          alt={media.alt}
          class="bg-img"
          radius="none"
          objectFit="cover"
          width="100%"
          height="100%"
        />
      </div>
    )
  }
  <Container class="hero-container content-layer">
    <div class="hero-content">
      {
        media && media.position !== 'background' && (
          <div class="hero-media">
            <Image src={media.src} alt={media.alt} radius="md" />
          </div>
        )
      }
      <div class="hero-text">
        <Heading level={1}>{title}</Heading>
        <Paragraph>{subtitle}</Paragraph>
        {cta && <Button href={cta.href} label={cta.label} />}
      </div>
    </div>
  </Container>
</section>

<style>
  .hg-Hero {
    position: relative;
    padding: var(--space-xl) var(--space-lg);
    background-size: cover;
    background-position: center;
  }

  .background-image {
    position: absolute;
    inset: 0;
    z-index: 1;
  }

  :global(.bg-img) {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
  }

  .content-layer {
    position: relative;
    z-index: 2;
  }

  .hg-Hero.variant-light {
    background: var(--color-background-body);
    color: var(--color-text-body);
  }

  .hg-Hero.variant-light h1 {
    color: var(--color-text-heading);
  }

  .hg-Hero.variant-dark {
    background: var(--color-background-accent);
    color: var(--color-text-inverse);
  }

  .hg-Hero.variant-dark h1 {
    color: var(--color-text-inverse);
  }

  .hero-container {
    display: flex;
    justify-content: center;
  }

  .hero-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-lg);
    text-align: center;
  }

  .hg-Hero.media-left .hero-content {
    flex-direction: row;
    text-align: left;
  }

  .hg-Hero.media-right .hero-content {
    flex-direction: row-reverse;
    text-align: left;
  }

  .hero-media {
    flex: 1;
  }

  .hero-text {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
  }

  @media (--bp-md) {
    .hg-Hero.media-left .hero-content,
    .hg-Hero.media-right .hero-content {
      flex-direction: column;
      text-align: center;
    }
  }
</style>
