---
/**
 * Icon Atom
 * Hunter Galloway Design System - Atomic Component
 *
 * A self-contained SVG icon component supporting inline SVG definitions.
 * Uses design tokens for all sizing and color values.
 * No external dependencies or files required.
 */

export interface Props {
  /** Icon name (must match inlineIcons keys) */
  name: string;
  /** Size variant */
  size?: 'xs' | 'sm' | 'md' | 'lg' | 'xl';
  /** Color variant */
  color?:
    | 'inherit'
    | 'primary'
    | 'secondary'
    | 'success'
    | 'warning'
    | 'error'
    | 'subtle';
  /** Alt text for accessibility */
  alt?: string;
  /** Additional CSS classes */
  class?: string;
  /** Optional inline style overrides (e.g., width/height via tokens) */
  style?: string;
}

const {
  name,
  size = 'md',
  color = 'inherit',
  alt,
  class: className = '',
  style: styleAttr,
} = Astro.props;

// Inline SVG icon definitions - self-contained, no external files
const inlineIcons: Record<string, string> = {
  phone:
    '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 15.5c-1.25 0-2.45-.2-3.57-.57-.35-.11-.74-.03-1.02.24l-2.2 2.2c-2.83-1.44-5.15-3.75-6.59-6.59l2.2-2.2c.27-.27.35-.66.24-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.5c0-.55-.45-1-1-1z"/></svg>',
  menu: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',
  search:
    '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>',
  close:
    '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>',
  'chevron-down':
    '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/></svg>',
  'chevron-right':
    '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/></svg>',
  // Slightly thicker, stroked chevron for better visibility in CTAs
  'chevron-right-bold':
    '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg>',
  'chevron-left':
    '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"/></svg>',
  'arrow-left':
    '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.42-1.41L7.83 13H20v-2z"/></svg>',
  'arrow-right':
    '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M4 11h12.17l-5.59-5.59L12 4l8 8-8 8-1.42-1.41L16.17 13H4v-2z"/></svg>',
  checkmark:
    '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>',
  star: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>',
  'star-outline':
    '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.64-7.03L22 9.24zm-10 6.11L8.24 19l.99-4.28L5.92 11.9l4.38-.38L12 7.1l1.71 4.42 4.38.38-3.31 2.82.99 4.28z"/></svg>',

  // Hunter Galloway Service Icons - Professional mortgage/loan service icons
  'first-home':
    '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/><path d="M7 10.5l5-4.5 5 4.5V17h-2v-4H9v4H7v-6.5z"/></svg>',
  investment:
    '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"/><path d="M9 11H7v9h2v-9zm4-4h-2v13h2V7zm4-4h-2v17h2V3z"/></svg>',
  refinance:
    '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6z"/><path d="M18.76 7.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"/></svg>',
  construction:
    '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M13.783 15.172l2.121-2.121 5.996 5.996-2.121 2.121z"/><path d="M17.5 10c1.93 0 3.5-1.57 3.5-3.5 0-.58-.16-1.12-.41-1.6l-2.7 2.7-1.49-1.49 2.7-2.7c-.48-.25-1.02-.41-1.6-.41C15.57 3 14 4.57 14 6.5c0 .41.08.8.21 1.16l-1.85 1.85-1.78-1.78.71-.71-1.41-1.41L12 8.71 8.21 4.93 7.5 5.64l1.06 1.06L7.43 7.84c-.81-.81-2.12-.81-2.93 0l-.71.71 1.06 1.06L3.93 10.5 4.64 11.21l.71-.71L8.29 13.44l-.71.71 1.41 1.41.71-.71 1.78 1.78L12 18.36l2.83-2.83 1.78 1.78L17 18.72l.71-.71-1.41-1.41-.71.71-1.78-1.78 1.85-1.85c.36.13.75.21 1.16.21z"/></svg>',
  commercial:
    '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"/></svg>',

  // Social icons
  facebook:
    '<svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M22 12.06C22 6.48 17.52 2 11.94 2S2 6.48 2 12.06c0 5.02 3.66 9.19 8.44 9.94v-7.03H7.9V12.06h2.54V9.98c0-2.5 1.49-3.88 3.77-3.88 1.09 0 2.23.2 2.23.2v2.45h-1.26c-1.24 0-1.63.77-1.63 1.56v1.75h2.78l-.44 2.91h-2.34V22c4.78-.75 8.44-4.92 8.44-9.94z"/></svg>',
  instagram:
    '<svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M7 2C4.24 2 2 4.24 2 7v10c0 2.76 2.24 5 5 5h10c2.76 0 5-2.24 5-5V7c0-2.76-2.24-5-5-5H7zm10 2c1.66 0 3 1.34 3 3v10c0 1.66-1.34 3-3 3H7c-1.66 0-3-1.34-3-3V7c0-1.66 1.34-3 3-3h10zm-5 3.5A5.5 5.5 0 1 0 17.5 13 5.507 5.507 0 0 0 12 7.5zm0 2A3.5 3.5 0 1 1 8.5 13 3.5 3.5 0 0 1 12 9.5zm5.75-2.75a1.25 1.25 0 1 0 1.25 1.25 1.25 1.25 0 0 0-1.25-1.25z"/></svg>',
  linkedin:
    '<svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M4.98 3.5C4.98 4.88 3.86 6 2.5 6S0 4.88 0 3.5 1.12 1 2.5 1s2.48 1.12 2.48 2.5zM.5 8h4V24h-4V8zM8.5 8h3.8v2.2h.05c.53-1 1.83-2.2 3.77-2.2 4.03 0 4.78 2.65 4.78 6.1V24h-4v-7.4c0-1.76-.03-4.03-2.46-4.03-2.46 0-2.84 1.92-2.84 3.9V24h-4V8z" transform="scale(1) translate(1,0)"/></svg>',
  youtube:
    '<svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M23.5 6.2a3 3 0 0 0-2.1-2.1C19 3.5 12 3.5 12 3.5s-7 0-9.4.6A3 3 0 0 0 .5 6.2 31.4 31.4 0 0 0 0 12a31.4 31.4 0 0 0 .6 5.8 3 3 0 0 0 2.1 2.1c2.4.6 9.4.6 9.4.6s7 0 9.4-.6a3 3 0 0 0 2.1-2.1A31.4 31.4 0 0 0 24 12a31.4 31.4 0 0 0-.5-5.8zM9.75 15.5v-7l6 3.5-6 3.5z"/></svg>',
};

// Check if icon exists
const iconSvg = inlineIcons[name];
if (!iconSvg) {
  console.warn(
    `Icon "${name}" not found. Available icons: ${Object.keys(inlineIcons).join(', ')}`,
  );
}

// Build CSS classes
const iconClasses = [
  'hg-icon',
  `hg-icon--${size}`,
  `hg-icon--${color}`,
  className,
]
  .filter(Boolean)
  .join(' ');
---

{
  iconSvg ? (
    <span
      class={iconClasses}
      role={alt ? 'img' : 'presentation'}
      aria-label={alt || `${name} icon`}
      aria-hidden={!alt}
      style={styleAttr}
      set:html={iconSvg}
    />
  ) : (
    <span
      class={iconClasses}
      role="presentation"
      aria-hidden="true"
      title={`Missing icon: ${name}`}
    >
      ‚ùå
    </span>
  )
}

<style>
  .hg-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    user-select: none;
    vertical-align: middle;
  }

  /* Ensure SVG fills container */
  .hg-icon svg {
    width: 100%;
    height: 100%;
    display: block;
  }

  /* Size variants using design tokens */
  .hg-icon--xs {
    width: var(--space-xs); /* 0.25rem / 4px */
    height: var(--space-xs);
  }

  .hg-icon--sm {
    width: var(--space-sm); /* 0.5rem / 8px */
    height: var(--space-sm);
  }

  .hg-icon--md {
    width: var(--space-md); /* 1rem / 16px */
    height: var(--space-md);
  }

  .hg-icon--lg {
    width: var(--space-lg); /* 2rem / 32px */
    height: var(--space-lg);
  }

  .hg-icon--xl {
    width: var(--space-xl); /* 3rem / 48px */
    height: var(--space-xl);
  }

  /* Color variants using design tokens */
  .hg-icon--inherit {
    color: inherit;
  }

  .hg-icon--primary {
    color: var(--color-interactive-primary);
  }

  .hg-icon--secondary {
    color: var(--color-text-subtle);
  }

  .hg-icon--success {
    color: var(--color-feedback-success);
  }

  .hg-icon--warning {
    color: var(--color-feedback-warning);
  }

  .hg-icon--error {
    color: var(--color-feedback-error);
  }

  .hg-icon--subtle {
    color: var(--color-text-subtle);
  }
</style>
